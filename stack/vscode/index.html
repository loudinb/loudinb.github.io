<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Brian Loudin


  | Visual Studio Code Development Containers

</title>
<meta name="description" content="loudinb.github.io
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/stack/vscode/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
       Brian Loudin
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item ">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/algorithms/">
                algorithms
                
              </a>
          </li>
          
          
          
          
          
          
          
          
          
          <li class="nav-item dropdown ">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                languages
                
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
              
              
                <a class="dropdown-item" href="/python/">python</a>
              
              
              
                <div class="dropdown-divider"></div>
              
              
              
                <a class="dropdown-item" href="/swift/">swift</a>
              
              
              </div>
          </li>
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/stack/">
                stack
                
              </a>
          </li>
          
          
          
          
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      <div class="post">

  <header class="post-header">
    <h2 class="post-title">Visual Studio Code Development Containers</h2>
    <p class="post-description">Learn how to use Docker and the Visual Studio Code remote containers extension to create containerized development environments.</p>
    <p class="d-byline">
        By Brian Loudin<br>
        September 09, 2021
    </p>
  </header>

  <article>
    <p>Containers enable you to create a highly-isolated development environment and allow you to easily “lift and shift” an application into a cloud environment.  <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">The Remote - Containers extension</a> for <a href="https://code.visualstudio.com">Visual Studio Code</a> lets you use a <a href="https://www.docker.com">Docker</a> container as a full-featured development environment.</p>

<p>Additionally, the majority of Visual Studio Code (VS Code) extensions can be installed inside the container (the workspace).  The VS Code remote-containers extension gives you great flexibility in customizing your entire tool-chain through containerization.</p>

<p>This article outlines how to get started with VS Code development containers on macOS.  It assumes you are familiar with macOS, VS Code and Docker.  The process on Windows is the same but a bit more complex, mainly due to how Docker operates on Windows.  These instructions are not intended for anyone using a Windows based computer.</p>

<h5 id="prerequisites">Prerequisites</h5>

<ul>
  <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
  <li><a href="https://code.visualstudio.com/download">VS Code</a></li>
</ul>

<h5 id="installing-the-remote---containers-extension">Installing the remote - containers extension</h5>

<p>If not already running, launch VS Code.</p>

<ol>
  <li>Bring up the Extensions view by clicking on the Extensions icon in the <strong>Activity Bar</strong> or by running the <code class="language-plaintext highlighter-rouge">View: Extensions</code> command (<strong>⇧⌘X</strong>).</li>
  <li>
    <p>Type <code class="language-plaintext highlighter-rouge">remote</code> in the search box to filter the Marketplace offerings to extensions with <strong>remote</strong> in the title or supplied metadata. You should see <strong>Remote - Containers</strong> in the list.</p>

    <p><img src="/assets/img/python-stack/vscode-extensions.png" alt="install extension" width="600px" /></p>
  </li>
  <li>
    <p>Select the <code class="language-plaintext highlighter-rouge">Install</code> button to install the extension.  VS Code will download and install the extension directly from the Marketplace.  Once the installation is complete, the Install button (in the list view) will change to the <strong>Manage</strong> gear button.<br />
 You should also notice a new status bar.  This is the remote-containers status bar and it will indicate if VS Code is running local or remote.</p>

    <p><img src="/assets/img/python-stack/remote-container-status-bar.png" alt="remote - status bar" width="110px" /><br />
 Clicking the status bar will bring up all available <strong>Remote - Containers</strong> commands.  This is a shortcut to running the <code class="language-plaintext highlighter-rouge">View: Command Palette</code> command (<strong>⇧⌘P</strong>) and filtering on <strong>remote containers</strong>.</p>
  </li>
</ol>

<h5 id="creating-the-development-container">Creating the development container</h5>

<p>There are many ways to create a development container.  In this tutorial we will create a development container using a pre-defined definition provided by the <strong>Remote - Containers</strong> extension.</p>

<ol>
  <li>Use the <code class="language-plaintext highlighter-rouge">File</code> menu and select <code class="language-plaintext highlighter-rouge">Open...</code> to launch the macOS file window.  Navigate to the folder you want to use for your project and select <code class="language-plaintext highlighter-rouge">Open</code>.  <em>Note: It is recommended that you use an empty folder for the root of your development container.</em></li>
  <li>Add a development container definition to the project by running the <code class="language-plaintext highlighter-rouge">Remote-Containers: Add Development Container Configuration Files...</code> command from the command palette (<strong>⇧⌘P</strong>).  You are presented with a filterable list of definitions.<br />
 The definitions displayed come from the <a href="https://github.com/Microsoft/vscode-dev-containers">vscode-dev-containers</a> GitHub repository. You can browse the <strong>containers</strong> folder of that repository to see the contents of each definition.</li>
  <li>Select <code class="language-plaintext highlighter-rouge">Python 3</code> from the list of definitions.<br />
 When creating the <strong>Python 3</strong> development container you will be asked to select the Python version and the Node.js version.  When prompted, select <code class="language-plaintext highlighter-rouge">3.9</code> for the <strong>Python version</strong><br />
 and <code class="language-plaintext highlighter-rouge">none</code> for the <strong>Node.js version</strong><br />
 The extension will create a folder named <strong>.devcontainer</strong> along with the dev container configuration files.</li>
  <li>VS Code recognizes that a development container configuration has been added to your project folder and prompts you to <strong>reopen folder to develop in container</strong>.   Select <code class="language-plaintext highlighter-rouge">Reopen in Container</code> when this prompt appears.<br />
It can take some time to open new or modified development containers as Docker must build the image.</li>
</ol>

<h5 id="whats-happening-under-the-hood">What’s happening under the hood?</h5>

<p>The most important thing to understand is that the <strong>Remote - Containers</strong> extension includes a server component which is automatically downloaded and installed into the container by VS Code.  The VS Code client on your local system manages and interacts with the server component running on the (remote) container.  Sequentially what happens is:</p>

<ol>
  <li>The docker image is built from the Dockerfile created.  Building the image may take a while, but it will be cached by the Docker build system for future use.</li>
  <li>VS Code gets the server component and copies it along with its own code into the container, it the users home directory (currently /root ). – Stage 2 also takes a short time, but we will speed that up in a moment.</li>
  <li>The project folder is mounted as a Docker volume inside the container, it is shared between the container and the host.</li>
  <li>The VS Code server is started on the container to run the non-UI elements of VS Code.  The UI on your desktop connects to the server through Docker’s networking subsystem using known secure transports.</li>
</ol>

<p>After opening the folder in the container, the VS Code window will look no different.  However, you should see the remote-containers status bar displays “Dev Container: Python 3”.  This means  the container was opened successfully. If you open an integrated terminal, you’ll notice you appear to be logged in as vscode in the folder /workspaces/…..</p>

<h5 id="understanding-the-configuration-files">Understanding the configuration files</h5>

<p>As previously stated, VS Code will create a folder named <strong>.devcontainer</strong>.  This folder will contain two configuration files:</p>
<ul>
  <li>A <strong>devcontainer.json</strong> file which tells Visual Studio Code tells how to create and access your development container.</li>
  <li>A <strong>Dockerfile</strong> which specifies the build steps for the Docker container.</li>
</ul>

<p>The <strong>devcontainer.json</strong> file is highly configurable but you will typically use only a small subset of all available properties for a given development container.   You can think of the <strong>devcontainer.json</strong> file as providing the following:</p>

<ul>
  <li>The (Docker) container build definition to use.</li>
  <li>How VS Code should interact with the container and local resources.</li>
  <li>The commands VS Code should run inside the container.</li>
  <li>VS Code workspace settings, including (workspace) extensions to install.</li>
</ul>

<p>The <strong>Dockerfile</strong> is a standard Docker file that contains all of the commands needed to build the image.   You can also use Docker Compose for the container definition, for a single-container definition or a multi-container definition.  This is not a Docker tutorial, so we will not be covering any aspects of the Docker build file.  For more information on Docker and Docker Compose for containers, please read the following from the Visual Studio Code team:</p>
<ul>
  <li><a href="https://code.visualstudio.com/docs/remote/containers-advanced">Advanced Container Configuration</a></li>
  <li><a href="https://code.visualstudio.com/docs/containers/docker-compose">Use Docker Compose</a></li>
</ul>

<h5 id="full-list-of-resources-referenced">Full list of resources referenced</h5>
<ul>
  <li><a href="https://code.visualstudio.com/docs/remote/containers">Developing Inside a Container</a></li>
  <li><a href="https://code.visualstudio.com/docs/remote/containers-advanced">Advanced Container Configuration</a></li>
  <li><a href="https://code.visualstudio.com/docs/containers/docker-compose">Use Docker Compose</a></li>
  <li><a href="https://code.visualstudio.com/docs/remote/devcontainerjson-reference">devcontainer.json reference</a></li>
  <li><a href="https://code.visualstudio.com/docs/getstarted/settings">User and Workspace Settings</a></li>
</ul>

<p><strong>Software Stack</strong><br />
macOS: 12.0 beta (21A5506j)
Docker Desktop: 4.0.0 (67817)
Visual Studio Code: 1.60.0 (Universal)
Remote - Containers Extension: v0.194.0</p>

<h5 id="recommended-the-configuration-files">Recommended the configuration files</h5>

<p>Other tutorials:</p>
<ol>
  <li>Linter and Formatter</li>
  <li>Github template repository</li>
  <li>CI/CD with CircleCI</li>
</ol>

<p>https://medium.com/swlh/create-a-reproducible-dev-environment-with-vs-code-fd89285644da</p>

<p>[https://sparrow.dev/devcontainers-quickstart/]</p>


  </article>

</div>
    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2021 Brian  Loudin.
    Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" taregt="_blank">al-folio</a> theme, hosted on <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.

    
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
